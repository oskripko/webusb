<html>
<body>
    <textarea id="printContent"></textarea>
    <input type="submit" onclick="connectAndPrint()" value="Print"/>
    <P>Type text into box and click on submit button.
    <script>
    var device;
function connectAndPrint() {
  var encoder = new TextEncoder();
    var data = encoder.encode(123);
    navigator.usb.requestDevice();
  navigator.usb.requestDevice({ filters: [{ vendorId: 3540 }] })
  .then(selectedDevice => {
     device = selectedDevice;
     return device.open(); // Begin a session.
   })
  .then(() => device.selectConfiguration(1)) // Select configuration #1 for the device.
  .then(() => device.claimInterface(0)) // Request exclusive control over interface #2.
  .then(() => device.controlTransferOut({
      requestType: 'class',
      recipient: 'interface',
      request: 0x22,
      value: 0x01,
      index: 0x02}, data)) // Ready to receive data
  .then(() => device.transferIn(5, 64)) // Waiting for 64 bytes of data from endpoint #5.
  .then(result => {
    let decoder = new TextDecoder();
    console.log('Received: ' + decoder.decode(result.data));
  })
  .catch(error => { console.log(error); });
      function setup(device) {
          return device.open()
          .then(() => device.selectConfiguration(1))
          .then(() => device.claimInterface(device.configuration.interfaces[0].interfaceNumber))
      }
}
  
    </script>
</body>
</html>